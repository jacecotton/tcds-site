"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Component=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.element=t,this.state=new Proxy({},this.stateHandler()),this.props=new Proxy(_objectSpread({},n),{set:function(e,t,n){return t in e&&e[t]!==n?console.warn("Attempt to mutate prop rejected. This is a problem in component subclass. Try deriving state from prop, or mutate prop value at time of instantiation.",{context:r.element,prop:t,"attempted value":n,"persisting value":e[t]}):e[t]=n,!0}}),this.debouncedSync=null,this.stateBatch={},this.element.addEventListener("state-change",(function(e){r.stateBatch.newState=_objectSpread(_objectSpread({},r.stateBatch.newState),e.detail.newState),r.stateBatch.prevState=_objectSpread(_objectSpread({},r.stateBatch.prevState),e.detail.prevState),null!==r.debouncedSync&&window.cancelAnimationFrame(r.debouncedSync),r.debouncedSync=window.requestAnimationFrame((function(){r.sync(r.stateBatch.newState,r.stateBatch.prevState),r.stateBatch={}}))}))}return _createClass(e,[{key:"stateHandler",value:function(){var e=this;return{get:function(t,n){return["[object Object]","[object Array]"].indexOf(Object.prototype.toString.call(t[n]))>-1?new Proxy(t[n],e.stateHandler()):t[n]},set:function(t,n,r){var a={};a[n]=t[n];var o={};return o[n]=r,t[n]!==r&&(t[n]=r,e.element.dispatchEvent(new CustomEvent("state-change",{detail:{context:e.element,newState:o,prevState:a}}))),!0}}}},{key:"sync",value:function(e,t){console.warn("No local sync method provided in component subclass.")}}]),e}();String.prototype.slugify=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-";return this.trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^\w\s]/gi," ").replace(/\s\s+/g," ").replace(/\s+/g,e)};
//# sourceMappingURL=tcds.js.map
