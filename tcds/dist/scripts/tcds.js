(()=>{"use strict";class t{constructor(t,e){this.element=t,this.state=new Proxy({},this.#t()),this.props=new Proxy({...e},this.#e()),this.#s={},this.#a=null,this.element.addEventListener("state-change",(t=>{this.#s.newState={...this.#s.newState,...t.detail.newState},this.#s.prevState={...this.#s.prevState,...t.detail.prevState},null!==this.#a&&cancelAnimationFrame(this.#a),this.#a=requestAnimationFrame((()=>{const t=this.sync(this.#s.newState,this.#s.prevState);for(let e in t)e in this.#s.newState&&t[e]();this.#s={}}))}))}#s;#a;#t(){return{set:(t,e,s)=>{const a={[e]:t[e]},i={[e]:s};return t[e]!==s&&(t[e]=s,this.element.dispatchEvent(new CustomEvent("state-change",{detail:{context:this.element,newState:i,prevState:a}}))),!0},get:(t,e)=>["[object Object]","[object Array]"].indexOf(Object.prototype.toString.call(t[e]))>-1?new Proxy(t[e],this.#t()):t[e]}}#e(){return{set:(t,e,s)=>(e in t&&t[e]!==s?console.warn("Attempt to mutate prop rejected; `this.props` is immutable. To use a mutable property, try initializing state or a new property from the `this.props` property value.",{context:this.element,property:e,"attempted value":s,"persisting value":t[e]}):t[e]=s,!0)}}sync(t,e){return console.warn("No local sync method provided in component subclass."),{}}}class e extends t{constructor(t,e){super(t,e),this.props.multiselectable=this.props.multiselectable||!1,this.panels=Array.from(this.element.querySelectorAll("[data-component-part=panel]")),this.buttons=Array.from(this.element.querySelectorAll("[data-component-part=panel-toggle]")),this.expandAllButton=this.element.querySelector("[data-component-part=expand-all]"),this.collapseAllButton=this.element.querySelector("[data-component-part=collapse-all]"),this.state.activeButtons=[],this.buttons.forEach((t=>{t.addEventListener("click",(()=>{const e=this.state.activeButtons.indexOf(t);e>-1?this.state.activeButtons.splice(e,1):!1===this.props.multiselectable?this.state.activeButtons=[t]:this.state.activeButtons.push(t)}))})),!0===this.props.multiselectable&&(this.expandAllButton.addEventListener("click",(()=>{this.state.activeButtons=[...this.buttons]})),this.collapseAllButton.addEventListener("click",(()=>{this.state.activeButtons=[]})))}sync(){this.buttons.forEach((t=>{const e=this.state.activeButtons.indexOf(t)>-1,s=this.getPanelByButton(t),a=t.closest("section");t.setAttribute("aria-expanded",e),a.setAttribute("data-open",e),e?(s.ontransitionend=null,s.hidden=!1,requestAnimationFrame((()=>{s.style.height=`${s.scrollHeight}px`}))):(s.style.height="0px",s.ontransitionend=()=>{s.hidden=!0})}))}getPanelByButton(t){return this.panels.find((e=>t.getAttribute("aria-controls")===e.id))}}window.addEventListener("load",(()=>{document.querySelectorAll("[data-component=Accordion]").forEach((t=>{t&&new e(t,{multiselectable:t.classList.contains("Accordion--multiselectable")})}))}));class s extends t{constructor(t,e){super(t,e),this.tabs=Array.from(this.element.querySelectorAll("[role=tab]")),this.tablist=this.element.querySelector("[role=tablist]"),this.panels=Array.from(this.element.querySelectorAll("[role=tabpanel]")),this.panelsContainer=this.element.querySelector("[data-component-part=tabpanels]"),this.state.activeTab=!0!==this.props.hideAll?this.tabs[0]:null;const s={ArrowRight:()=>{this.state.activeTab=this.getNextTab(),this.state.activeTab.focus()},ArrowLeft:()=>{this.state.activeTab=this.getPreviousTab(),this.state.activeTab.focus()}};this.tabs.forEach((t=>{t.addEventListener("click",(()=>{this.state.activeTab=t})),t.addEventListener("keydown",(t=>{s[t.code]&&s[t.code]()}))}))}sync(){return{activeTab:()=>{this.tabs.forEach((t=>{t.setAttribute("aria-expanded",t===this.state.activeTab),t.setAttribute("tabindex",t!==this.state.activeTab&&this.state.activeTab?"-1":"0")})),this.panels.forEach((t=>{this.props.keepPanelVisibility||(t.hidden=!(t===this.getPanelByTab(this.state.activeTab)))})),window.dispatchEvent(new Event("scroll"))}}}getNextTab(t=this.state.activeTab){return t===this.tabs[this.tabs.length-1]?this.tabs[0]:this.tabs[this.tabs.indexOf(t)+1]}getPreviousTab(t=this.state.activeTab){return t===this.tabs[0]?this.tabs[this.tabs.length-1]:this.tabs[this.tabs.indexOf(t)-1]}getPanelByTab(t){return t instanceof HTMLElement&&"tab"===t.getAttribute("role")?this.panels.find((e=>t.getAttribute("aria-controls")===e.id)):null}}document.querySelectorAll("[data-component=Tabs]").forEach((t=>{t&&new s(t,{hideAll:t.classList.contains("Tabs--hide-all")})}));class a extends s{constructor(t,e){function s(){!0===this.state.playing&&(this.state.playing=!1,this.temporaryPause=!0)}function a(){!0===this.temporaryPause&&(this.state.playing=!0,this.temporaryPause=null)}super(t,e),this.controls={next:this.element.querySelector("[data-action=next]"),previous:this.element.querySelector("[data-action=previous]"),playPause:this.element.querySelector("[data-action=play-pause]"),expandCollapse:this.element.querySelector("[data-action=expand-collapse]")},!0===window.matchMedia("(prefers-reduced-motion: reduce), (hover: none)").matches?this.state.playing=!1:this.state.playing=this.props.autoplay,this.state.expanded=!1,this.controls.next.addEventListener("click",(()=>{this.state.activeTab=this.getNextTab(),this.state.playing=!1})),this.controls.previous.addEventListener("click",(()=>{this.state.activeTab=this.getPreviousTab(),this.state.playing=!1})),this.controls.playPause.addEventListener("click",(()=>{this.state.playing=!this.state.playing})),this.tabs.forEach((t=>{t.addEventListener("click",(()=>{this.state.playing=!1})),t.addEventListener("keydown",(()=>{this.state.playing=!1}))})),this.panelsContainer.addEventListener("touchstart",(()=>{this.state.playing=!1})),this.panelsContainer.addEventListener("mouseenter",s.bind(this)),this.panelsContainer.addEventListener("focusin",s.bind(this)),this.panelsContainer.addEventListener("mouseleave",a.bind(this)),this.panelsContainer.addEventListener("focusout",a.bind(this)),new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting?(a.call(this),this.isIntersecting=!0):(s.call(this),this.isIntersecting=!1)}))}),{threshold:.9}).observe(this.element),document.addEventListener("visibilitychange",(()=>{!0===document.hidden?s.call(this):!1===document.hidden&&!0===this.temporaryPause&&0!=this.isIntersecting&&requestAnimationFrame((()=>{a.call(this)}))}),!1);const i=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&!0!==this.state.expanded&&(this.state.activeTab=this.element.querySelector(`[role=tab][aria-controls=${t.target.id}]`))}))}),{root:this.panelsContainer,threshold:1,rootMargin:"1px"});this.panels.forEach((t=>{i.observe(t)})),this.controls.expandCollapse.addEventListener("click",(()=>{this.state.playing=!1,this.state.expanded=!this.state.expanded}))}sync(){return super.sync(),{activeTab:()=>{super.sync().activeTab();const t=this.getPanelByTab(this.state.activeTab),e=this.panelsContainer.getBoundingClientRect().left,s=t.getBoundingClientRect().left;this.panelsContainer.scrollLeft+=s-e,this.panels.forEach((e=>{e===t?(e.removeAttribute("aria-hidden"),e.removeAttribute("tabindex")):(e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex","-1"))}))},playing:()=>{this.controls.playPause.setAttribute("aria-label",this.state.playing?"Pause carousel":"Play carousel"),this.controls.playPause.setAttribute("title",this.state.playing?"Pause carousel":"Play carousel"),this.controls.playPause.innerHTML=this.state.playing?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>':'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>',this.panelsContainer.setAttribute("aria-live",this.state.playing?"off":"polite"),!0===this.state.playing?this.playTimer=setTimeout(this.play.bind(this),this.props.interval):clearTimeout(this.playTimer)},expanded:()=>{this.controls.expandCollapse.setAttribute("aria-expanded",this.state.expanded),this.controls.expandCollapse.setAttribute("title",this.state.expanded?"Collapse carousel":"Expand carousel"),this.controls.expandCollapse.setAttribute("aria-label",this.state.expanded?"Collapse carousel":"Expand carousel"),this.element.setAttribute("data-expanded",this.state.expanded),this.tablist.hidden=this.state.expanded,this.controls.playPause.hidden=this.state.expanded,this.controls.next.hidden=this.state.expanded,this.controls.previous.hidden=this.state.expanded,this.state.expanded?(this.element.removeAttribute("aria-roledescription"),this.panelsContainer.removeAttribute("aria-live"),this.panels.forEach((t=>{t.removeAttribute("role"),t.removeAttribute("aria-roledescription"),t.removeAttribute("aria-hidden"),t.removeAttribute("tabindex")}))):(this.element.setAttribute("aria-roledescription","carousel"),this.panels.forEach((t=>{t.setAttribute("role","tabpanel"),t.setAttribute("aria-roledescription","slide")})),this.sync().activeTab())}}}play(){!0===this.state.playing&&(this.state.activeTab=this.getNextTab(),this.playTimer=setTimeout(this.play.bind(this),this.props.interval))}}window.addEventListener("load",(()=>{document.querySelectorAll("[data-component=Carousel]").forEach((t=>{t&&new a(t,{interval:parseInt(t.getAttribute("data-interval"))||5e3,autoplay:"true"===t.getAttribute("data-autoplay"),keepPanelVisibility:!0})}))}))})();