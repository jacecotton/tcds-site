@use "../_all" as *;

.Button {
  --button-height: #{size("medium", "rem")};
  --button-font-size: #{font-size("medium")};
  --button-padding: calc((var(--button-height) - var(--button-font-size)) / 1.5);

  display: inline-flex;
  align-items: center;
  background-color: theme-color("primary");
  color: theme-color("primary", "0");
  font-family: font-stack("ui");
  font-size: var(--button-font-size);
  height: size("medium", "rem"); // fallback
  height: var(--button-height);
  line-height: 1;
  white-space: nowrap;
  padding: 0 2em; // fallback
  padding: 0 var(--button-padding);
  overflow: hidden;
  position: relative;
  text-decoration: none;
  transform: scale(var(--button-scale, 1)) translate(var(--button-translate, 0, 0));
  transition: transform animation("productive");
  user-select: none;
  z-index: 1;

  /** States */

  &:hover {
    --button-overlay-color: #{color("shade", "100")};
  }

  &:active {
    --button-overlay-color: #{color("shade", "200")};
    --button-scale: .99;
  }

  /** Modifiers */
  
  &--small {
    --button-font-size: #{font-size("small")};
    
    @media (pointer: fine) {
      --button-height: #{size("small", "rem")};
    }
  }

  &--large {
    --button-height: #{size("large", "rem")};
    --button-font-size: #{font-size("medium-plus")};
  }

  &--full-width {
    display: flex;
    justify-content: center;
    width: 100%;
  }

  &--round {
    border-radius: var(--button-height);
  }

  &--ghost {
    background-color: transparent;
    color: inherit;
    
    --button-icon-background: transparent;
  }

  &--ghost#{&}--icon-right {
    --button-icon-margin-left: 0;
  }

  &--ghost:not(#{&}--icon-right) {
    --button-icon-margin-right: 0;
  }

  &--icon-right {
    flex-direction: row-reverse;

    --button-icon-margin-right: calc(var(--button-padding) * -1);
    --button-icon-margin-left: var(--button-padding);
  }

  &--icon-only {
    padding: 0;

    --button-icon-background: transparent;
    --button-icon-margin-right: 0;
    --button-icon-margin-left: 0;
  }

  /** Children */

  &::after {
    content: "";
    background: var(--button-overlay-color, transparent);
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    transition: background animation("productive");
    z-index: -1;
  }

  svg {
    background: var(--button-icon-background, #{color("shade", "100")});
    height: 100%;
    margin:
      0 var(--button-icon-margin-right, var(--button-padding))
      0 var(--button-icon-margin-left, calc(var(--button-padding) * -1));
    padding: calc(var(--button-padding) * .65);
  }
}